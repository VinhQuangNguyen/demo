<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
    <title>Quảng Cáo Có Thưởng</title>

    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
        background: white;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
      }

      #watchAdButton {
        background: #007bff;
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
      }

      #watchAdButton:hover {
        background: #0056b3;
      }
    </style>

    <script>
      window.googletag = window.googletag || { cmd: [] };

      let rewardedSlot;
      let rewardPayload;
      let isAdReady = false;

      googletag.cmd.push(() => {
        rewardedSlot = googletag.defineOutOfPageSlot(
          "/22639388115/rewarded_web_example",
          googletag.enums.OutOfPageFormat.REWARDED
        );

        if (rewardedSlot) {
          rewardedSlot.addService(googletag.pubads());

          googletag.pubads().addEventListener("rewardedSlotReady", (event) => {
            isAdReady = true;
            window.rewardedEvent = event;
          });

          googletag.pubads().addEventListener("rewardedSlotClosed", dismissRewardedAd);

          googletag.pubads().addEventListener("rewardedSlotGranted", (event) => {
            rewardPayload = event.payload;
          });

          googletag.enableServices();
          googletag.display(rewardedSlot);
        }
      });

      function dismissRewardedAd() {
        document.body.style.overflow = '';
        if (rewardedSlot) {
          googletag.destroySlots([rewardedSlot]);
        }
      }

      function loadAd() {
        if (isAdReady && window.rewardedEvent) {
          window.rewardedEvent.makeRewardedVisible();
          document.body.style.overflow = 'hidden';
        }
      }
    </script>
  </head>
  <body>
    <button id="watchAdButton" onclick="loadAd()">Tải quảng cáo</button>
  </body>
</html>